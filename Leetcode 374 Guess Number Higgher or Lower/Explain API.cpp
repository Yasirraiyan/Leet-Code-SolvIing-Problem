ЁЯФ╣ API ржХрзА?

ЁЯСЙ API (Application Programming Interface) рж╣ржЪрзНржЫрзЗ ржПржХржЯрж╛ function / method ржпрзЗржЯрж╛ ржЖржорж░рж╛ рж╕рж░рж╛рж╕рж░рж┐ рж▓рж┐ржЦрж┐ржирж┐, ржмрж░ржВ ржЖржорж╛ржжрзЗрж░ ржЬржирзНржп ржЖржЧрзЗ ржерзЗржХрзЗржЗ рждрзИрж░рж┐ ржХрж░рзЗ ржжрзЗржУрзЯрж╛ рж╣рзЯрзЗржЫрзЗред ржЖржорж░рж╛ рж╢рзБржзрзБ ржПржЯрж╛ржХрзЗ call ржХрж░рж┐, ржЖрж░ result ржкрж╛ржЗред

ржПржЗ рж╕ржорж╕рзНржпрж╛рзЯ ржЖржорж╛ржжрзЗрж░ ржЬржирзНржп ржПржХржЯрж╛ API ржжрзЗржУрзЯрж╛ ржЖржЫрзЗ:

int guess(int num);
ржПржЯрж╛ ржПржХржЯрж╛ рж╕ржВржЦрзНржпрж╛ (num) ржирзЗрзЯ, рждрж╛рж░ржкрж░ рждрж┐ржиржЯрж╛ ржЕржмрж╕рзНржерж╛рж░ ржоржзрзНржпрзЗ ржПржХржЯрж╛ рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рзЗ:

-1 тЖТ ржпржжрж┐ num ржЖржорж╛ржжрзЗрж░ ржЧрзЗрж╕ ржХрж░рж╛ рж╕ржВржЦрзНржпрж╛рж░ ржерзЗржХрзЗ ржмрзЬ рж╣рзЯ

1 тЖТ ржпржжрж┐ num ржЖржорж╛ржжрзЗрж░ ржЧрзЗрж╕ ржХрж░рж╛ рж╕ржВржЦрзНржпрж╛рж░ ржерзЗржХрзЗ ржЫрзЛржЯ рж╣рзЯ

0 тЖТ ржпржжрж┐ num ржарж┐ржХ рж╕ржарж┐ржХ рж╣рзЯ

ЁЯФ╣ рж╕рж╛ржзрж╛рж░ржг ржерж┐ржУрж░рж┐ (Common Theory)
ржЖржорж░рж╛ 1 ржерзЗржХрзЗ n ржПрж░ ржоржзрзНржпрзЗ ржПржХржЯрж╛ рж╕ржВржЦрзНржпрж╛ ржмрж╛ржЫрж╛ржЗ ржХрж░рж┐ред

ржЖржорж░рж╛ API-ржХрзЗ ржПржХржЯрж╛ guess(num) ржХрж▓ ржжрж┐рзЯрзЗ ржмрж▓рж┐:

ржпржжрж┐ API ржмрж▓рзЗ -1, рждрж╛рж░ ржорж╛ржирзЗ ржЖржорж░рж╛ ржмрзЗрж╢рж┐ ржмрзЬ ржЧрзЗрж╕ ржХрж░рзЗржЫрж┐ тЖТ ржЖржорж╛ржжрзЗрж░ ржЫрзЛржЯ ржжрж┐ржХрзЗ (left) ржЦрзБржБржЬрждрзЗ рж╣ржмрзЗред

ржпржжрж┐ API ржмрж▓рзЗ 1, рждрж╛рж░ ржорж╛ржирзЗ ржЖржорж░рж╛ ржХржо ржЧрзЗрж╕ ржХрж░рзЗржЫрж┐ тЖТ ржЖржорж╛ржжрзЗрж░ ржбрж╛ржи ржжрж┐ржХрзЗ (right) ржЦрзБржБржЬрждрзЗ рж╣ржмрзЗред

ржпржжрж┐ API ржмрж▓рзЗ 0, рждрж╛рж░ ржорж╛ржирзЗ ржЖржорж░рж╛ рж╕ржарж┐ржХ рж╕ржВржЦрзНржпрж╛ржЯрж╛ ржкрзЗрзЯрзЗ ржЧрзЗржЫрж┐ред

ржПржЗржнрж╛ржмрзЗ ржЖржорж░рж╛ Binary Search ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж┐ тЖТ ржкрзНрж░рждрж┐ржмрж╛рж░ ржорж╛ржЭржЦрж╛ржирзЗрж░ рж╕ржВржЦрзНржпрж╛ (mid) ржЪрзЗржХ ржХрж░рж┐, ржЖрж░ API ржЕржирзБржпрж╛рзЯрзА search range ржЫрзЛржЯ ржХрж░рж┐ред

ЁЯФ╣ рждрзЛржорж╛рж░ ржжрзЗржУрзЯрж╛ ржХрзЛржбрзЗрж░ ржмрзНржпрж╛ржЦрзНржпрж╛ (Line by Line)
cpp
Copy
Edit
class Solution 
{
public:
    int guessNumber(int n) 
    {
        int low=0;          // search рж╢рзБрж░рзБ рж╣ржмрзЗ 0 ржерзЗржХрзЗ
        int high=n;         // рж╢рзЗрж╖ рж╣ржмрзЗ n ржП
        int mid;            // ржоржзрзНржпржмрж┐ржирзНржжрзБ рж░рж╛ржЦрж╛рж░ ржЬржирзНржп
ЁЯСЙ ржПржЦрж╛ржирзЗ ржЖржорж░рж╛ рж╢рзБрж░рзБрждрзЗ рж╕рж╛рж░рзНржЪрзЗрж░ range [0, n] ржзрж░рзЗ ржирж┐рзЯрзЗржЫрж┐ред

cpp
Copy
Edit
        while(low<=high)    // ржпрждржХрзНрж╖ржг ржкрж░рзНржпржирзНржд range valid ржерж╛ржХрзЗ
        {
            int mid=low+(high-low)/2;  // ржорж╛ржЭрзЗрж░ рж╕ржВржЦрзНржпрж╛ ржмрзЗрж░ ржХрж░рж▓рж╛ржо
            int res=guess(mid);        // API ржХрзЗ ржХрж▓ ржХрж░рзЗ result ржЖржирж▓рж╛ржо
ЁЯСЙ ржПржЦрж╛ржирзЗ mid ржмрзЗрж░ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ ржЖрж░ рж╕рзЗржЗ mid ржХрзЗ API-рждрзЗ ржкрж╛ржарж╛ржирзЛ рж╣ржЪрзНржЫрзЗред API ржЖржорж╛ржжрзЗрж░ ржмрж▓ржмрзЗ mid ржЫрзЛржЯ, ржмрзЬ ржирж╛ржХрж┐ ржарж┐ржХред

cpp
Copy
Edit
            if(-1==res) 
            {
                high=mid-1;  // mid ржмрзЬ рж╣рзЯрзЗ ржЧрзЗржЫрзЗ тЖТ high ржХрзЗ ржЫрзЛржЯ ржХрж░рж▓рж╛ржо
            }
            else if(1==res)
            {
                low=mid+1;   // mid ржЫрзЛржЯ рж╣рзЯрзЗ ржЧрзЗржЫрзЗ тЖТ low ржХрзЗ ржмрзЬ ржХрж░рж▓рж╛ржо
            }
            else if(res==0) 
                return mid; // mid ржарж┐ржХ рж╣рзЯрзЗ ржЧрзЗржЫрзЗ тЖТ answer ржкрзЗрзЯрзЗ ржЧрзЗржЫрж┐
ЁЯСЙ ржПржЦрж╛ржирзЗ рждрж┐ржиржЯрж╛ ржХржирзНржбрж┐рж╢ржи ржЪрзЗржХ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗред API ржпрзЗ ржЕржирзБржпрж╛рзЯрзА result ржжрзЗрзЯ, рж╕рзЗ ржЕржирзБржпрж╛рзЯрзА low ржЖрж░ high ржЖржкржбрзЗржЯ рж╣рзЯред

cpp
Copy
Edit
        }
        return low;   // fallback (normally ржПржЦрж╛ржирзЗ ржЖрж╕ржмрзЗ ржирж╛, ржХрж╛рж░ржг mid ржкрж╛ржУрзЯрж╛рж░ ржЖржЧрзЗржЗ return рж╣рзЯрзЗ ржпрж╛ржмрзЗ)
    }
};
ЁЯФ╣ ржЙржжрж╛рж╣рж░ржг (Example Walkthrough)
ржзрж░рзЛ, n = 10 ржПржмржВ number рж╣ржЪрзНржЫрзЗ 6ред

ржкрзНрж░ржержорзЗ low=0, high=10 тЖТ mid=5

guess(5) тЖТ API рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рзЗ 1 (ржХрж╛рж░ржг 5 < 6)

рждрж╛ржЗ ржЖржорж░рж╛ ржмрж▓рж┐ low=6

ржПржмрж╛рж░ low=6, high=10 тЖТ mid=8

guess(8) тЖТ API рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рзЗ -1 (ржХрж╛рж░ржг 8 > 6)

рждрж╛ржЗ ржЖржорж░рж╛ ржмрж▓рж┐ high=7

ржПржмрж╛рж░ low=6, high=7 тЖТ mid=6

guess(6) тЖТ API рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рзЗ 0

рж╕ржарж┐ржХ answer ржкрж╛ржУрзЯрж╛ ржЧрзЗрж▓ тЖТ return 6

тЬЕ ржПржнрж╛ржмрзЗ API рж╢рзБржзрзБ ржЖржорж╛ржжрзЗрж░ржХрзЗ ржмрж▓рзЗ ржжрзЗрзЯ тЖТ ржЖржорж░рж╛ рж╕ржарж┐ржХ ржкржерзЗ ржпрж╛ржЪрзНржЫрж┐ ржирж╛ржХрж┐ ржЙрж▓рзНржЯрж╛ ржкржерзЗред ржЖрж░ Binary Search ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЖржорж░рж╛ ржжрзНрж░рзБржд рж╕ржарж┐ржХ рж╕ржВржЦрзНржпрж╛ ржмрзЗрж░ ржХрж░рзЗ ржлрзЗрж▓рж┐ред
